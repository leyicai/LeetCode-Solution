<html>
<head>
  <title>128. Longest Consecutive Sequence</title>
  <basefont face="Segoe UI" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600753 (en-US, DDL); Windows/10.0.0 (Win64);"/>
  <meta name="content-class" content="maxiang"/>
  <style>
    body, td {
      font-family: Segoe UI;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="755"/>
<h1>128. Longest Consecutive Sequence</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>Tags:</b></td><td><i>Array, Hard</i></td></tr>
</table>
</div>
<br/>

<div><span lang="v2" style="color: #2c3f51; font-family: Candara, Microsoft Yahei, 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, Song, sans-serif; font-size: 15px; line-height: 1.6; background: none;"><del style="position:relative;display:block;z-index:10;"><a href="http://maxiang.io/#/?provider=evernote&amp;guid=64052f6b-1245-4753-8cb0-a8a6695d481b&amp;notebook=LeetCode" style="position: absolute;color: #FFF;text-decoration: none;font-size: 12px;height: 25px;border-radius: 0;margin-top: -20px;right: 15px;background: rgba(0, 0, 0, 0);border-left: 10px solid #BB3A34;border-right: 10px solid #BB3A34;border-bottom: 5px solid rgba(0, 0, 0, 0);width: 0;text-indent:-100000px;">Edit</a></del><div style="color: #3e3e3e; font-family: Candara, Microsoft Yahei, 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, Song, sans-serif; font-size: 15px; line-height: 1.6;">
                        
                    

<h1 style="margin-top: 21px; font-family: inherit; margin-bottom: 10.5px; color: #3e3e3e; font-weight: bold; line-height: 1.2; margin: 20px 0; text-align: left; padding-left: 15px; word-break: break-all; font-size: 32px; border-left: 8px solid #71BA51;">128. Longest Consecutive Sequence</h1>

<p style="color: #3e3e3e; text-align: justify; margin: 6px 0; line-height: 1.2; min-height: 1em; box-sizing: border-box; word-wrap: break-word;"></p>

<h2 style="font-family: inherit; margin-top: 21px; margin-bottom: 10.5px; color: #3e3e3e; line-height: 1.2; font-weight: bold; margin: 30px 0; text-align: left; padding-left: 15px; word-break: break-all; border-left: 6px solid #71BA51; font-size: 28px;">HashSet</h2>

<p style="color: #3e3e3e; text-align: justify; margin: 6px 0; line-height: 1.2; min-height: 1em; box-sizing: border-box; word-wrap: break-word;">If number has no pre, find the consecutive sequence</p>



<pre style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; word-wrap: break-word; padding: 12px 13px; margin: 0 0 1.1em; line-height: 1.6; word-break: break-all; font-size: 13px; color: #898989; background-color: #f8f8f8; border: 0; border-radius: 3px; text-align: start; position: relative; background: #f2f2f2;"><code style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; border-radius: 0; font-size: inherit; background-color: transparent; color: #333; display: block; overflow-x: auto; background: #f8f8f8; padding: 1.3em 2em; padding-left: 3.3em;"><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">1.</span><div style="color: #3e3e3e; line-height: 1.6;"></div>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">2.</span><span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">class</span> <span style="display: inline; line-height: 1.6; color: #900; font-weight: bold; background-color: transparent;">Solution</span> {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">3.</span>    <span style="color: #3e3e3e; display: inline; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">public</span> <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span> <span style="display: inline; line-height: 1.6; color: #900; font-weight: bold; background-color: transparent;">longestConsecutive</span>(<span style="color: #3e3e3e; display: inline; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span>[] nums</span>) </span>{
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">4.</span>        <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">if</span> (nums == <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">null</span> || nums.length &lt; <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">1</span>)
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">5.</span>            <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">return</span> <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">0</span>;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">6.</span>        HashSet&lt;Integer&gt; <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">set</span> = <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">new</span> HashSet&lt;&gt;();
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">7.</span>        <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">for</span> (<span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span> n : nums) {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">8.</span>            <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">set</span>.<span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">add</span>(n);
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">9.</span>        }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">10.</span>        <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span> res = <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">0</span>;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">11.</span>        <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">for</span> (<span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span> n : nums) {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">12.</span>            <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">if</span> (!<span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">set</span>.contains(n - <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">1</span>)) {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">13.</span>                <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span> i = n + <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">1</span>;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">14.</span>                <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">while</span> (<span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">set</span>.contains(i)) {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">15.</span>                    i++;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">16.</span>                }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">17.</span>                res = Math.max(res, i - n);
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">18.</span>            }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">19.</span>        }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">20.</span>        <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">return</span> res;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">21.</span>    }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">22.</span>}
</div></code></pre>

<p style="color: #3e3e3e; text-align: justify; margin: 6px 0; line-height: 1.2; min-height: 1em; box-sizing: border-box; word-wrap: break-word;">Optimization: Remove consecutive numbers from the set.  <br style="color: #3e3e3e;"/>
Return if the set is empty(all elements have been counted in the sequence)</p>



<pre style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; word-wrap: break-word; padding: 12px 13px; margin: 0 0 1.1em; line-height: 1.6; word-break: break-all; font-size: 13px; color: #898989; background-color: #f8f8f8; border: 0; border-radius: 3px; text-align: start; position: relative; background: #f2f2f2;"><code style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; border-radius: 0; font-size: inherit; background-color: transparent; color: #333; display: block; overflow-x: auto; background: #f8f8f8; padding: 1.3em 2em; padding-left: 3.3em;"><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">1.</span><span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">class</span> <span style="display: inline; line-height: 1.6; color: #900; font-weight: bold; background-color: transparent;">Solution</span> {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">2.</span>    <span style="color: #3e3e3e; display: inline; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">public</span> <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span> <span style="display: inline; line-height: 1.6; color: #900; font-weight: bold; background-color: transparent;">longestConsecutive</span>(<span style="color: #3e3e3e; display: inline; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span>[] nums</span>) </span>{
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">3.</span>        <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">if</span> (nums == <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">null</span> || nums.length &lt; <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">1</span>)
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">4.</span>            <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">return</span> <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">0</span>;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">5.</span>        HashSet&lt;Integer&gt; <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">set</span> = <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">new</span> HashSet&lt;&gt;();
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">6.</span>        <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">for</span> (<span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span> n : nums) {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">7.</span>            <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">set</span>.<span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">add</span>(n);
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">8.</span>        }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">9.</span>        <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span> res = <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">0</span>;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">10.</span>        <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">for</span> (<span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span> n : nums) {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">11.</span>            <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span> left = n - <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">1</span>, right = n + <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">1</span>;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">12.</span>            <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">set</span>.<span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">remove</span>(n);
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">13.</span>            <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">while</span> (<span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">set</span>.<span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">remove</span>(left))
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">14.</span>                left--;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">15.</span>            <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">while</span> (<span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">set</span>.<span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">remove</span>(right))
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">16.</span>                right++;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">17.</span>            res = Math.max(res, right - left - <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">1</span>);
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">18.</span>            <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">if</span> (<span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">set</span>.isEmpty())
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">19.</span>                <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">return</span> res;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">20.</span>        }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">21.</span>        <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">return</span> res;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">22.</span>    }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">23.</span>}
</div></code></pre>

<h2 style="font-family: inherit; margin-top: 21px; margin-bottom: 10.5px; color: #3e3e3e; line-height: 1.2; font-weight: bold; margin: 30px 0; text-align: left; padding-left: 15px; word-break: break-all; border-left: 6px solid #71BA51; font-size: 28px;">HashMap</h2>

<ul style="margin-top: 0; margin-bottom: 1.1em; color: #3e3e3e; padding-left: 30px; line-height: 1.6;"><li style="color: #3e3e3e; line-height: 24px;"><p style="color: #3e3e3e; text-align: justify; margin: 6px 0; line-height: 1.2; min-height: 1em; box-sizing: border-box; word-wrap: break-word;">key:  number</p></li>
<li style="color: #3e3e3e; line-height: 24px;"><p style="color: #3e3e3e; text-align: justify; margin: 6px 0; line-height: 1.2; min-height: 1em; box-sizing: border-box; word-wrap: break-word;">value: length of longest consecutive sequence contains this number</p></li>
</ul>



<pre style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; word-wrap: break-word; padding: 12px 13px; margin: 0 0 1.1em; line-height: 1.6; word-break: break-all; font-size: 13px; color: #898989; background-color: #f8f8f8; border: 0; border-radius: 3px; text-align: start; position: relative; background: #f2f2f2;"><code style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; border-radius: 0; font-size: inherit; background-color: transparent; color: #333; display: block; overflow-x: auto; background: #f8f8f8; padding: 1.3em 2em; padding-left: 3.3em;"><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">1.</span><span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">class</span> Solution {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">2.</span>    <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">public</span> <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span> longestConsecutive(<span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span>[] nums) {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">3.</span>        <span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">if</span> (nums == null || nums.length &lt; <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">1</span>)
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">4.</span>            <span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">return</span> <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">0</span>;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">5.</span>        HashMap&lt;Integer, Integer&gt; <span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">map</span> = <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">new</span> HashMap&lt;&gt;();
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">6.</span>        <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span> res = <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">0</span>;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">7.</span>        <span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">for</span> (<span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span> n : nums) {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">8.</span>            <span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">if</span> (!<span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">map</span>.containsKey(n)) {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">9.</span>                <span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">// expand n to its left/right neighbors(if exists)</span>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">10.</span>                <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span> left = <span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">map</span>.containsKey(n - <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">1</span>) ? <span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">map</span>.<span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">get</span>(n - <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">1</span>) : <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">0</span>;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">11.</span>                <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span> right = <span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">map</span>.containsKey(n + <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">1</span>) ? <span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">map</span>.<span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">get</span>(n + <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">1</span>) : <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">0</span>;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">12.</span>                <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span> sum = left + right + <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">1</span>; <span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">// length of seq contains n</span>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">13.</span>                <span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">map</span>.<span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">put</span>(n, sum); <span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">// add n into map</span>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">14.</span>                <span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">// update two end points of current seq</span>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">15.</span>                <span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">if</span> (left &gt; <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">0</span>)
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">16.</span>                    <span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">map</span>.<span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">put</span>(n - left, sum);
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">17.</span>                <span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">if</span> (right &gt; <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">0</span>)
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">18.</span>                    <span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">map</span>.<span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">put</span>(n + right, sum);
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">19.</span>                <span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">// update res</span>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">20.</span>                res = Math.<span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">max</span>(res, sum);
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">21.</span>            }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">22.</span>        }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">23.</span>        <span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">return</span> res;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">24.</span>    }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">25.</span>}
</div></code></pre></div><center style="display:none !important;visibility:collapse !important;height:0 !important;white-space:nowrap;width:100%;overflow:hidden">%23%20128.%20Longest%20Consecutive%20Sequence%0A@%28LeetCode%29%5BHard%2C%20Array%5D%0A%23%23%20HashSet%0AIf%20number%20has%20no%20pre%2C%20find%20the%20consecutive%20sequence%0A%60%60%60%0A%0Aclass%20Solution%20%7B%0A%20%20%20%20public%20int%20longestConsecutive%28int%5B%5D%20nums%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28nums%20%3D%3D%20null%20%7C%7C%20nums.length%20%3C%201%29%0A%20%20%20%20%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%20%20HashSet%3CInteger%3E%20set%20%3D%20new%20HashSet%3C%3E%28%29%3B%0A%20%20%20%20%20%20%20%20for%20%28int%20n%20%3A%20nums%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20set.add%28n%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20int%20res%20%3D%200%3B%0A%20%20%20%20%20%20%20%20for%20%28int%20n%20%3A%20nums%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21set.contains%28n%20-%201%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20int%20i%20%3D%20n%20+%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20while%20%28set.contains%28i%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20i++%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20res%20%3D%20Math.max%28res%2C%20i%20-%20n%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20res%3B%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0AOptimization%3A%20Remove%20consecutive%20numbers%20from%20the%20set.%20%0AReturn%20if%20the%20set%20is%20empty%28all%20elements%20have%20been%20counted%20in%20the%20sequence%29%0A%60%60%60%0Aclass%20Solution%20%7B%0A%20%20%20%20public%20int%20longestConsecutive%28int%5B%5D%20nums%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28nums%20%3D%3D%20null%20%7C%7C%20nums.length%20%3C%201%29%0A%20%20%20%20%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%20%20HashSet%3CInteger%3E%20set%20%3D%20new%20HashSet%3C%3E%28%29%3B%0A%20%20%20%20%20%20%20%20for%20%28int%20n%20%3A%20nums%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20set.add%28n%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20int%20res%20%3D%200%3B%0A%20%20%20%20%20%20%20%20for%20%28int%20n%20%3A%20nums%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20int%20left%20%3D%20n%20-%201%2C%20right%20%3D%20n%20+%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20set.remove%28n%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20while%20%28set.remove%28left%29%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20left--%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20while%20%28set.remove%28right%29%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20right++%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20res%20%3D%20Math.max%28res%2C%20right%20-%20left%20-%201%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28set.isEmpty%28%29%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20res%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20res%3B%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%23%23%20HashMap%0A-%20key%3A%20%20number%0A-%20value%3A%20length%20of%20longest%20consecutive%20sequence%20contains%20this%20number%0A%0A%60%60%60%0Aclass%20Solution%20%7B%0A%20%20%20%20public%20int%20longestConsecutive%28int%5B%5D%20nums%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28nums%20%3D%3D%20null%20%7C%7C%20nums.length%20%3C%201%29%0A%20%20%20%20%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%20%20HashMap%3CInteger%2C%20Integer%3E%20map%20%3D%20new%20HashMap%3C%3E%28%29%3B%0A%20%20%20%20%20%20%20%20int%20res%20%3D%200%3B%0A%20%20%20%20%20%20%20%20for%20%28int%20n%20%3A%20nums%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21map.containsKey%28n%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20expand%20n%20to%20its%20left/right%20neighbors%28if%20exists%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20int%20left%20%3D%20map.containsKey%28n%20-%201%29%20%3F%20map.get%28n%20-%201%29%20%3A%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20int%20right%20%3D%20map.containsKey%28n%20+%201%29%20%3F%20map.get%28n%20+%201%29%20%3A%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20int%20sum%20%3D%20left%20+%20right%20+%201%3B%20//%20length%20of%20seq%20contains%20n%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20map.put%28n%2C%20sum%29%3B%20//%20add%20n%20into%20map%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20update%20two%20end%20points%20of%20current%20seq%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28left%20%3E%200%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20map.put%28n%20-%20left%2C%20sum%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28right%20%3E%200%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20map.put%28n%20+%20right%2C%20sum%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20update%20res%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20res%20%3D%20Math.max%28res%2C%20sum%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20res%3B%0A%20%20%20%20%7D%0A%7D%0A%60%60%60</center><br/></span>
</div></body></html> 