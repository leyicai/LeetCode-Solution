<html>
<head>
  <title>239. Sliding Window Maximum</title>
  <basefont face="Segoe UI" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600753 (en-US, DDL); Windows/10.0.0 (Win64);"/>
  <meta name="content-class" content="maxiang"/>
  <style>
    body, td {
      font-family: Segoe UI;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="791"/>
<h1>239. Sliding Window Maximum</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>Tags:</b></td><td><i>Array, Hard</i></td></tr>
</table>
</div>
<br/>

<div><span lang="v2" style="color: #2c3f51; font-family: Candara, Microsoft Yahei, 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, Song, sans-serif; font-size: 15px; line-height: 1.6; background: none;"><del style="position:relative;display:block;z-index:10;"><a href="http://maxiang.io/#/?provider=evernote&amp;guid=c2a99f3a-2add-438f-8c76-22762d066b15&amp;notebook=LeetCode" style="position: absolute;color: #FFF;text-decoration: none;font-size: 12px;height: 25px;border-radius: 0;margin-top: -20px;right: 15px;background: rgba(0, 0, 0, 0);border-left: 10px solid #BB3A34;border-right: 10px solid #BB3A34;border-bottom: 5px solid rgba(0, 0, 0, 0);width: 0;text-indent:-100000px;">Edit</a></del><div style="color: #3e3e3e; font-family: Candara, Microsoft Yahei, 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, Song, sans-serif; font-size: 15px; line-height: 1.6;">
                        
                    

<h1 style="margin-top: 21px; font-family: inherit; margin-bottom: 10.5px; color: #3e3e3e; font-weight: bold; line-height: 1.2; margin: 20px 0; text-align: left; padding-left: 15px; word-break: break-all; font-size: 32px; border-left: 8px solid #71BA51;">239. Sliding Window Maximum</h1>

<p style="color: #3e3e3e; text-align: justify; margin: 6px 0; line-height: 1.2; min-height: 1em; box-sizing: border-box; word-wrap: break-word;"></p>



<pre style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; word-wrap: break-word; padding: 12px 13px; margin: 0 0 1.1em; line-height: 1.6; word-break: break-all; font-size: 13px; color: #898989; background-color: #f8f8f8; border: 0; border-radius: 3px; text-align: start; position: relative; background: #f2f2f2;"><code style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; border-radius: 0; font-size: inherit; background-color: transparent; color: #333; display: block; overflow-x: auto; background: #f8f8f8; padding: 1.3em 2em; padding-left: 3.3em;"><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">1.</span><span style="display: inline; line-height: 1.6; color: #000080; font-weight: normal; background-color: transparent;">Input</span>: nums = [1,3,-1,-3,5,3,6,7], and k = 3
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">2.</span><span style="display: inline; line-height: 1.6; color: #000080; font-weight: normal; background-color: transparent;">Output</span>: [3,3,5,5,6,7] 
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">3.</span><span style="display: inline; line-height: 1.6; color: #000080; font-weight: normal; background-color: transparent;">Explanation</span>: 
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">4.</span><div style="color: #3e3e3e; line-height: 1.6;"></div>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">5.</span><span style="color: #3e3e3e; display: inline; line-height: 1.6; background-color: transparent;">Window position                Max</span>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">6.</span><span style="color: #3e3e3e; display: inline; line-height: 1.6; background-color: transparent;">---------------               -----</span>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">7.</span><span style="color: #3e3e3e; display: inline; line-height: 1.6; background-color: transparent;">[<span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">1</span>  <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">3</span>  <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">-1</span>] <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">-3</span>  <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">5</span>  <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">3</span>  <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">6</span>  <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">7</span>       <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">3</span></span>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">8.</span><span style="color: #3e3e3e; display: inline; line-height: 1.6; background-color: transparent;"> <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">1</span> [<span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">3</span>  <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">-1</span>  <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">-3</span>] <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">5</span>  <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">3</span>  <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">6</span>  <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">7</span>       <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">3</span></span>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">9.</span><span style="color: #3e3e3e; display: inline; line-height: 1.6; background-color: transparent;"> <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">1</span>  <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">3</span> [<span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">-1</span>  <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">-3</span>  <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">5</span>] <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">3</span>  <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">6</span>  <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">7</span>       <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">5</span></span>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">10.</span><span style="color: #3e3e3e; display: inline; line-height: 1.6; background-color: transparent;"> <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">1</span>  <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">3</span>  <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">-1</span> [<span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">-3</span>  <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">5</span>  <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">3</span>] <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">6</span>  <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">7</span>       <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">5</span></span>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">11.</span><span style="color: #3e3e3e; display: inline; line-height: 1.6; background-color: transparent;"> <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">1</span>  <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">3</span>  <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">-1</span>  <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">-3</span> [<span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">5</span>  <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">3</span>  <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">6</span>] <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">7</span>       <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">6</span></span>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">12.</span><span style="color: #3e3e3e; display: inline; line-height: 1.6; background-color: transparent;"> <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">1</span>  <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">3</span>  <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">-1</span>  <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">-3</span>  <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">5</span> [<span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">3</span>  <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">6</span>  <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">7</span>]      <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">7</span></span>
</div></code></pre>

<p style="color: #3e3e3e; text-align: justify; margin: 6px 0; line-height: 1.2; min-height: 1em; box-sizing: border-box; word-wrap: break-word;"><strong style="font-weight: bold; line-height: 1.6; color: #FD5B03;">Use a deque to store only elements that need to be considered.</strong></p>

<ol style="margin-top: 0; margin-bottom: 1.1em; color: #3e3e3e; padding-left: 30px; line-height: 1.6;"><li style="color: #3e3e3e; line-height: 24px;"><p style="color: #3e3e3e; text-align: justify; margin: 6px 0; line-height: 1.2; min-height: 1em; box-sizing: border-box; word-wrap: break-word;">A deque to store <strong style="font-weight: bold; line-height: 1.6; color: #FD5B03;">indices</strong> of elements need to be considered</p>

<ul style="margin-top: 0; margin-bottom: .55em; color: #3e3e3e; padding-left: 30px; line-height: 1.6;">
<li style="color: #3e3e3e; line-height: 24px;"><p style="color: #3e3e3e; text-align: justify; margin: 6px 0; line-height: 1.2; min-height: 1em; box-sizing: border-box; word-wrap: break-word;">check from tail, remove the elements that is smaller than current one</p></li>
<li style="color: #3e3e3e; line-height: 24px;"><p style="color: #3e3e3e; text-align: justify; margin: 6px 0; line-height: 1.2; min-height: 1em; box-sizing: border-box; word-wrap: break-word;">because for the next windows, current one is more likely than the smaller ones to be the “max”</p></li></ul></li>
<li style="color: #3e3e3e; line-height: 24px;"><p style="color: #3e3e3e; text-align: justify; margin: 6px 0; line-height: 1.2; min-height: 1em; box-sizing: border-box; word-wrap: break-word;">The elements in deque must in the range [i-k+1, i]</p></li>
<li style="color: #3e3e3e; line-height: 24px;"><p style="color: #3e3e3e; text-align: justify; margin: 6px 0; line-height: 1.2; min-height: 1em; box-sizing: border-box; word-wrap: break-word;">The head of deque is always the max of current window</p></li>
<li style="color: #3e3e3e; line-height: 24px;"><p style="color: #3e3e3e; text-align: justify; margin: 6px 0; line-height: 1.2; min-height: 1em; box-sizing: border-box; word-wrap: break-word;">The deque contains at most k elements in descending order. Mostly there will be less than k elements, for that the non-promising elements(those smaller than their previous and next ones) are not in the deque</p></li>
</ol>

<pre style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; word-wrap: break-word; padding: 12px 13px; margin: 0 0 1.1em; line-height: 1.6; word-break: break-all; font-size: 13px; color: #898989; background-color: #f8f8f8; border: 0; border-radius: 3px; text-align: start; position: relative; background: #f2f2f2;"><code style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; border-radius: 0; font-size: inherit; background-color: transparent; color: #333; display: block; overflow-x: auto; background: #f8f8f8; padding: 1.3em 2em; padding-left: 3.3em;"><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">1.</span><span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">public</span> <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span>[] maxSlidingWindow(<span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span>[] nums, <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span> k) {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">2.</span>    <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">if</span>(nums == <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">null</span> || nums.length &lt; <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">1</span>)
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">3.</span>        <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">return</span> nums;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">4.</span>    <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span>[] res = <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">new</span> <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span>[nums.length - k + <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">1</span>];
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">5.</span>    <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span> j = <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">0</span>;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">6.</span>    <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">for</span> (<span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span> i = <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">0</span>; i &lt; nums.length; i++) {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">7.</span>        <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">if</span> (!dq.isEmpty() &amp;&amp; dq.peek() &lt; i - k + <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">1</span>) {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">8.</span>            <span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">// remove idx out of range</span>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">9.</span>            dq.poll();
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">10.</span>        }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">11.</span>        <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">while</span> (!dq.isEmpty() &amp;&amp; nums[dq.peekLast()] &lt; nums[i]) {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">12.</span>            <span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">// remove useless candidates</span>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">13.</span>            dq.pollLast();
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">14.</span>        }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">15.</span>        <span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">// add current one into deque</span>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">16.</span>        dq.addLast(i);
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">17.</span>        <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">if</span> (i &gt;= k - <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">1</span>) {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">18.</span>            <span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">// add into res array</span>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">19.</span>            res[j++] = nums[dq.peek()];
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">20.</span>        }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">21.</span><div style="color: #3e3e3e; line-height: 1.6;"></div>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">22.</span>    }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">23.</span>     <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">return</span> res;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">24.</span>}
</div></code></pre></div><center style="display:none !important;visibility:collapse !important;height:0 !important;white-space:nowrap;width:100%;overflow:hidden">%23%20239.%20Sliding%20Window%20Maximum%0A@%28LeetCode%29%5BArray%2C%20Hard%5D%0A%0A%60%60%60%0AInput%3A%20nums%20%3D%20%5B1%2C3%2C-1%2C-3%2C5%2C3%2C6%2C7%5D%2C%20and%20k%20%3D%203%0AOutput%3A%20%5B3%2C3%2C5%2C5%2C6%2C7%5D%20%0AExplanation%3A%20%0A%0AWindow%20position%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Max%0A---------------%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20-----%0A%5B1%20%203%20%20-1%5D%20-3%20%205%20%203%20%206%20%207%20%20%20%20%20%20%203%0A%201%20%5B3%20%20-1%20%20-3%5D%205%20%203%20%206%20%207%20%20%20%20%20%20%203%0A%201%20%203%20%5B-1%20%20-3%20%205%5D%203%20%206%20%207%20%20%20%20%20%20%205%0A%201%20%203%20%20-1%20%5B-3%20%205%20%203%5D%206%20%207%20%20%20%20%20%20%205%0A%201%20%203%20%20-1%20%20-3%20%5B5%20%203%20%206%5D%207%20%20%20%20%20%20%206%0A%201%20%203%20%20-1%20%20-3%20%205%20%5B3%20%206%20%207%5D%20%20%20%20%20%207%0A%60%60%60%0A**Use%20a%20deque%20to%20store%20only%20elements%20that%20need%20to%20be%20considered.**%0A1.%20A%20deque%20to%20store%20**indices**%20of%20elements%20need%20to%20be%20considered%0A%09-%20check%20from%20tail%2C%20remove%20the%20elements%20that%20is%20smaller%20than%20current%20one%0A%09-%20because%20for%20the%20next%20windows%2C%20current%20one%20is%20more%20likely%20than%20the%20smaller%20ones%20to%20be%20the%20%22max%22%0A3.%20The%20elements%20in%20deque%20must%20in%20the%20range%20%5Bi-k+1%2C%20i%5D%0A4.%20The%20head%20of%20deque%20is%20always%20the%20max%20of%20current%20window%0A5.%20The%20deque%20contains%20at%20most%20k%20elements%20in%20descending%20order.%20Mostly%20there%20will%20be%20less%20than%20k%20elements%2C%20for%20that%20the%20non-promising%20elements%28those%20smaller%20than%20their%20previous%20and%20next%20ones%29%20are%20not%20in%20the%20deque%0A%0A%60%60%60java%0Apublic%20int%5B%5D%20maxSlidingWindow%28int%5B%5D%20nums%2C%20int%20k%29%20%7B%0A%20%20%20%20if%28nums%20%3D%3D%20null%20%7C%7C%20nums.length%20%3C%201%29%0A%20%20%20%20%20%20%20%20return%20nums%3B%0A%20%20%20%20int%5B%5D%20res%20%3D%20new%20int%5Bnums.length%20-%20k%20+%201%5D%3B%0A%20%20%20%20int%20j%20%3D%200%3B%0A%20%20%20%20for%20%28int%20i%20%3D%200%3B%20i%20%3C%20nums.length%3B%20i++%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28%21dq.isEmpty%28%29%20%26%26%20dq.peek%28%29%20%3C%20i%20-%20k%20+%201%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20remove%20idx%20out%20of%20range%0A%20%20%20%20%20%20%20%20%20%20%20%20dq.poll%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20while%20%28%21dq.isEmpty%28%29%20%26%26%20nums%5Bdq.peekLast%28%29%5D%20%3C%20nums%5Bi%5D%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20remove%20useless%20candidates%0A%20%20%20%20%20%20%20%20%20%20%20%20dq.pollLast%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20//%20add%20current%20one%20into%20deque%0A%20%20%20%20%20%20%20%20dq.addLast%28i%29%3B%0A%20%20%20%20%20%20%20%20if%20%28i%20%3E%3D%20k%20-%201%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20add%20into%20res%20array%0A%20%20%20%20%20%20%20%20%20%20%20%20res%5Bj++%5D%20%3D%20nums%5Bdq.peek%28%29%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%0A%20%20%20%20%7D%0A%20%20%20%20%20return%20res%3B%0A%7D%0A%60%60%60</center><br/></span>
</div></body></html> 