<html>
<head>
  <title>121&amp;122&amp;123&amp;188&amp;309. Best Time to Buy and Sell Stock</title>
  <basefont face="Segoe UI" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600753 (en-US, DDL); Windows/10.0.0 (Win64);"/>
  <meta name="content-class" content="maxiang"/>
  <style>
    body, td {
      font-family: Segoe UI;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="738"/>
<h1>121&amp;122&amp;123&amp;188&amp;309. Best Time to Buy and Sell Stock</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>Tags:</b></td><td><i>Array, DP, Easy, Greedy, Hard</i></td></tr>
</table>
</div>
<br/>

<div><span lang="v2" style="color: #2c3f51; font-family: Candara, Microsoft Yahei, 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, Song, sans-serif; font-size: 15px; line-height: 1.6; background: none;"><del style="position:relative;display:block;z-index:10;"><a href="http://maxiang.io/#/?provider=evernote&amp;guid=51f5f280-bcbb-4fa2-9a0d-b5bcbc7cfb49&amp;notebook=LeetCode" style="position: absolute;color: #FFF;text-decoration: none;font-size: 12px;height: 25px;border-radius: 0;margin-top: -20px;right: 15px;background: rgba(0, 0, 0, 0);border-left: 10px solid #BB3A34;border-right: 10px solid #BB3A34;border-bottom: 5px solid rgba(0, 0, 0, 0);width: 0;text-indent:-100000px;">Edit</a></del><div style="color: #3e3e3e; font-family: Candara, Microsoft Yahei, 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, Song, sans-serif; font-size: 15px; line-height: 1.6;">
                        
                    



<h1 style="margin-top: 21px; font-family: inherit; margin-bottom: 10.5px; color: #3e3e3e; font-weight: bold; line-height: 1.2; margin: 20px 0; text-align: left; padding-left: 15px; word-break: break-all; font-size: 32px; border-left: 8px solid #71BA51;">121&amp;122&amp;123&amp;188&amp;309. Best Time to Buy and Sell Stock</h1>

<p style="color: #3e3e3e; text-align: justify; margin: 6px 0; line-height: 1.2; min-height: 1em; box-sizing: border-box; word-wrap: break-word;"></p>

<h2 style="font-family: inherit; margin-top: 21px; margin-bottom: 10.5px; color: #3e3e3e; line-height: 1.2; font-weight: bold; margin: 30px 0; text-align: left; padding-left: 15px; word-break: break-all; border-left: 6px solid #71BA51; font-size: 28px;">121. Only one transaction</h2>

<p style="color: #3e3e3e; text-align: justify; margin: 6px 0; line-height: 1.2; min-height: 1em; box-sizing: border-box; word-wrap: break-word;">Greedy: greedy for best profit - buy the cheapest one</p>



<pre style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; word-wrap: break-word; padding: 12px 13px; margin: 0 0 1.1em; line-height: 1.6; word-break: break-all; font-size: 13px; color: #898989; background-color: #f8f8f8; border: 0; border-radius: 3px; text-align: start; position: relative; background: #f2f2f2;"><code style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; border-radius: 0; font-size: inherit; background-color: transparent; color: #333; display: block; overflow-x: auto; background: #f8f8f8; padding: 1.3em 2em; padding-left: 3.3em;"><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">1.</span><span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">class</span> Solution {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">2.</span>    <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">public</span> <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span> maxProfit(<span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span>[] prices) {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">3.</span>        <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span> buy = Integer.MAX_VALUE, profit = <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">0</span>;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">4.</span>        <span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">for</span> (<span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span> i = <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">0</span>; i &lt; prices.length; i++) {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">5.</span>            buy = Math.<span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">min</span>(buy, prices[i]);
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">6.</span>            profit = Math.<span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">max</span>(profit, prices[i] - buy);
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">7.</span>        }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">8.</span>        <span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">return</span> profit;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">9.</span>    }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">10.</span>}
</div></code></pre>



<h2 style="font-family: inherit; margin-top: 21px; margin-bottom: 10.5px; color: #3e3e3e; line-height: 1.2; font-weight: bold; margin: 30px 0; text-align: left; padding-left: 15px; word-break: break-all; border-left: 6px solid #71BA51; font-size: 28px;">122. As many transactions as you like</h2>

<p style="color: #3e3e3e; text-align: justify; margin: 6px 0; line-height: 1.2; min-height: 1em; box-sizing: border-box; word-wrap: break-word;">Greedy:  if a&lt;b&lt;c, a-c = b-a + c-b</p>



<pre style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; word-wrap: break-word; padding: 12px 13px; margin: 0 0 1.1em; line-height: 1.6; word-break: break-all; font-size: 13px; color: #898989; background-color: #f8f8f8; border: 0; border-radius: 3px; text-align: start; position: relative; background: #f2f2f2;"><code style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; border-radius: 0; font-size: inherit; background-color: transparent; color: #333; display: block; overflow-x: auto; background: #f8f8f8; padding: 1.3em 2em; padding-left: 3.3em;"><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">1.</span><span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">class</span> <span style="display: inline; line-height: 1.6; color: #900; font-weight: bold; background-color: transparent;">Solution</span> {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">2.</span>    <span style="color: #3e3e3e; display: inline; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">public</span> <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span> <span style="display: inline; line-height: 1.6; color: #900; font-weight: bold; background-color: transparent;">maxProfit</span>(<span style="color: #3e3e3e; display: inline; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span>[] prices</span>) </span>{
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">3.</span>        <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span> profit = <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">0</span>;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">4.</span>        <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">for</span> (<span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span> i = <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">1</span>; i &lt; prices.length; i++) {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">5.</span>            <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">if</span> (prices[i] &gt; prices[i - <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">1</span>]) {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">6.</span>                profit += prices[i] - prices[i - <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">1</span>];
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">7.</span>            }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">8.</span>        }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">9.</span>        <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">return</span> profit;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">10.</span>    }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">11.</span>}
</div></code></pre>



<h2 style="font-family: inherit; margin-top: 21px; margin-bottom: 10.5px; color: #3e3e3e; line-height: 1.2; font-weight: bold; margin: 30px 0; text-align: left; padding-left: 15px; word-break: break-all; border-left: 6px solid #71BA51; font-size: 28px;">123&amp;188. At most two(k) transactions</h2>

<p style="color: #3e3e3e; text-align: justify; margin: 6px 0; line-height: 1.2; min-height: 1em; box-sizing: border-box; word-wrap: break-word;">DP: <br style="color: #3e3e3e;"/>
 dp[i][j]: max profit on day i with up to j transactions <br style="color: #3e3e3e;"/>
 dp[i][j] = max between:</p>

<ol style="margin-top: 0; margin-bottom: 1.1em; color: #3e3e3e; padding-left: 30px; line-height: 1.6;"><li style="color: #3e3e3e; line-height: 24px;"><p style="color: #3e3e3e; text-align: justify; margin: 6px 0; line-height: 1.2; min-height: 1em; box-sizing: border-box; word-wrap: break-word;">already j transaction before day i: dp[i-1][j]</p></li>
<li style="color: #3e3e3e; line-height: 24px;"><p style="color: #3e3e3e; text-align: justify; margin: 6px 0; line-height: 1.2; min-height: 1em; box-sizing: border-box; word-wrap: break-word;">j-1 transctions before day k(k &lt; i) and make transaction on day i: <br style="color: #3e3e3e;"/>
max(dp[k][j-1] + prices[i] - prices[k]) = prices[i] + max(dp[k][j-1] - prices[k])</p></li>
</ol>

<p style="color: #3e3e3e; text-align: justify; margin: 6px 0; line-height: 1.2; min-height: 1em; box-sizing: border-box; word-wrap: break-word;">dp[0][j] = 0, on day 0 no transaction was made <br style="color: #3e3e3e;"/>
dp[i][0] = 0, 0 transcation</p>



<pre style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; word-wrap: break-word; padding: 12px 13px; margin: 0 0 1.1em; line-height: 1.6; word-break: break-all; font-size: 13px; color: #898989; background-color: #f8f8f8; border: 0; border-radius: 3px; text-align: start; position: relative; background: #f2f2f2;"><code style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; border-radius: 0; font-size: inherit; background-color: transparent; color: #333; display: block; overflow-x: auto; background: #f8f8f8; padding: 1.3em 2em; padding-left: 3.3em;"><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">1.</span><span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">class</span> Solution {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">2.</span>    <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">public</span> <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span> maxProfit(<span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span>[] prices) {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">3.</span>        <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span> n = prices.length, profit = <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">0</span>;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">4.</span>        <span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">if</span> (n &lt; <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">2</span>)
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">5.</span>            <span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">return</span> <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">0</span>;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">6.</span>        <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span>[][] dp = <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">new</span> <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span>[n][<span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">3</span>];
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">7.</span>        <span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">for</span> (<span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span> j = <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">1</span>; j &lt; <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">3</span>; j++) {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">8.</span>            <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span> maxDiff = dp[<span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">0</span>][j - <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">1</span>] - prices[<span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">0</span>];
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">9.</span>            <span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">for</span> (<span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span> i = <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">1</span>; i &lt; n; i++) {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">10.</span>                dp[i][j] = Math.<span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">max</span>(dp[i - <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">1</span>][j], maxDiff + prices[i]);
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">11.</span>                maxDiff = Math.<span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">max</span>(dp[i][j - <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">1</span>] - prices[i], maxDiff);
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">12.</span>                profit = Math.<span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">max</span>(dp[i][j], profit);
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">13.</span>            }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">14.</span>        }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">15.</span>        <span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">return</span> profit;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">16.</span>    }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">17.</span>}
</div></code></pre>

<p style="color: #3e3e3e; text-align: justify; margin: 6px 0; line-height: 1.2; min-height: 1em; box-sizing: border-box; word-wrap: break-word;">Greedy for 123 <br style="color: #3e3e3e;"/>
First transaction: as 121, buy the cheapest one <br style="color: #3e3e3e;"/>
Second transaction: use the profit of first transaction to buy the second one and then compute the final profit.</p>



<pre style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; word-wrap: break-word; padding: 12px 13px; margin: 0 0 1.1em; line-height: 1.6; word-break: break-all; font-size: 13px; color: #898989; background-color: #f8f8f8; border: 0; border-radius: 3px; text-align: start; position: relative; background: #f2f2f2;"><code style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; border-radius: 0; font-size: inherit; background-color: transparent; color: #333; display: block; overflow-x: auto; background: #f8f8f8; padding: 1.3em 2em; padding-left: 3.3em;"><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">1.</span><span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">class</span> Solution {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">2.</span>    <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">public</span> <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span> maxProfit(<span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span>[] prices) {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">3.</span>        <span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">if</span> (prices.length &lt; <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">2</span>)
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">4.</span>            <span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">return</span> <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">0</span>;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">5.</span>        <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span> buy1 = Integer.MAX_VALUE, buy2 = Integer.MAX_VALUE;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">6.</span>        <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span> profit1 = <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">0</span>, profit2 = <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">0</span>;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">7.</span>        <span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">for</span> (<span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span> p : prices) {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">8.</span>            profit2 = Math.<span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">max</span>(profit2, p - buy2); <span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">// sell all stock to get final profit</span>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">9.</span>            buy2 = Math.<span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">min</span>(buy2, p - profit1); <span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">// sell first stock(profit1) and buy the second stock; or to say, use</span>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">10.</span>                                                <span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">// profit1 to buy second stock</span>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">11.</span>            profit1 = Math.<span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">max</span>(profit1, p - buy1);
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">12.</span>            buy1 = Math.<span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">min</span>(buy1, p); <span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">// buy the lowest one</span>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">13.</span>        }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">14.</span>        <span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">return</span> profit2;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">15.</span>    }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">16.</span>}
</div></code></pre>



<h2 style="font-family: inherit; margin-top: 21px; margin-bottom: 10.5px; color: #3e3e3e; line-height: 1.2; font-weight: bold; margin: 30px 0; text-align: left; padding-left: 15px; word-break: break-all; border-left: 6px solid #71BA51; font-size: 28px;">188. At most k transaction</h2>

<p style="color: #3e3e3e; text-align: justify; margin: 6px 0; line-height: 1.2; min-height: 1em; box-sizing: border-box; word-wrap: break-word;">Avoid Memory Limit Exceeded:</p>



<pre style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; word-wrap: break-word; padding: 12px 13px; margin: 0 0 1.1em; line-height: 1.6; word-break: break-all; font-size: 13px; color: #898989; background-color: #f8f8f8; border: 0; border-radius: 3px; text-align: start; position: relative; background: #f2f2f2;"><code style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; border-radius: 0; font-size: inherit; background-color: transparent; color: #333; display: block; overflow-x: auto; background: #f8f8f8; padding: 1.3em 2em; padding-left: 3.3em;"><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">1.</span> <span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">// if k &gt;= n/2, you can make maximum number of transactions.</span>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">2.</span> <span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">// each transaction needs at least 2 days</span>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">3.</span>        <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">if</span> (k &gt;= n / <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">2</span>) {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">4.</span>            <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span> profit = <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">0</span>;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">5.</span>            <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">for</span> (<span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span> i = <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">1</span>; i &lt; n; i++) {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">6.</span>                <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">if</span> (prices[i] &gt; prices[i - <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">1</span>]) {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">7.</span>                    profit += prices[i] - prices[i - <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">1</span>];
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">8.</span>                }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">9.</span>            }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">10.</span>            <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">return</span> profit;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">11.</span>        }
</div></code></pre>

<h2 style="font-family: inherit; margin-top: 21px; margin-bottom: 10.5px; color: #3e3e3e; line-height: 1.2; font-weight: bold; margin: 30px 0; text-align: left; padding-left: 15px; word-break: break-all; border-left: 6px solid #71BA51; font-size: 28px;">309. With cooldown</h2>

<p style="color: #3e3e3e; text-align: justify; margin: 6px 0; line-height: 1.2; min-height: 1em; box-sizing: border-box; word-wrap: break-word;">DP:</p>

<ol style="margin-top: 0; margin-bottom: 1.1em; color: #3e3e3e; padding-left: 30px; line-height: 1.6;"><li style="color: #3e3e3e; line-height: 24px;"><p style="color: #3e3e3e; text-align: justify; margin: 6px 0; line-height: 1.2; min-height: 1em; box-sizing: border-box; word-wrap: break-word;">3 dynamic array: maxProfit of sequence end with <em style="color: #3e3e3e; line-height: 1.6;">operation</em> before day i</p>

<ol style="margin-top: 0; margin-bottom: .55em; color: #3e3e3e; padding-left: 30px; line-height: 1.6;">
<li style="color: #3e3e3e; line-height: 24px;"><p style="color: #3e3e3e; text-align: justify; margin: 6px 0; line-height: 1.2; min-height: 1em; box-sizing: border-box; word-wrap: break-word;">buy[i]: max(cool[i-1]-p[i]<em style="color: #3e3e3e; line-height: 1.6;">(buy on day i)</em>, buy[i-1])</p></li>
<li style="color: #3e3e3e; line-height: 24px;"><p style="color: #3e3e3e; text-align: justify; margin: 6px 0; line-height: 1.2; min-height: 1em; box-sizing: border-box; word-wrap: break-word;">sell[i]: max(buy[i-1]+p[i]<em style="color: #3e3e3e; line-height: 1.6;">(sell on day i)</em>, sell[i-1])</p></li>
<li style="color: #3e3e3e; line-height: 24px;"><p style="color: #3e3e3e; text-align: justify; margin: 6px 0; line-height: 1.2; min-height: 1em; box-sizing: border-box; word-wrap: break-word;">cool[i]: max(buy[i-1], sell[i-1], cool[i-1])</p></li></ol></li>
<li style="color: #3e3e3e; line-height: 24px;"><p style="color: #3e3e3e; text-align: justify; margin: 6px 0; line-height: 1.2; min-height: 1em; box-sizing: border-box; word-wrap: break-word;">Deduce transition function: cool[i] &gt;= buy[i], cool[i] &lt;= sell[i]. So <strong style="font-weight: bold; line-height: 1.6; color: #FD5B03;">cool[i] = sell[i-1]</strong></p>

<ol style="margin-top: 0; margin-bottom: .55em; color: #3e3e3e; padding-left: 30px; line-height: 1.6;">
<li style="color: #3e3e3e; line-height: 24px;"><p style="color: #3e3e3e; text-align: justify; margin: 6px 0; line-height: 1.2; min-height: 1em; box-sizing: border-box; word-wrap: break-word;">buy[i] = max(sell[i-2] - p[i-1], buy[i-1])</p></li>
<li style="color: #3e3e3e; line-height: 24px;"><p style="color: #3e3e3e; text-align: justify; margin: 6px 0; line-height: 1.2; min-height: 1em; box-sizing: border-box; word-wrap: break-word;">sell[i] = max(buy[i-1]+p[i], sell[i-1])</p></li></ol></li>
<li style="color: #3e3e3e; line-height: 24px;"><p style="color: #3e3e3e; text-align: justify; margin: 6px 0; line-height: 1.2; min-height: 1em; box-sizing: border-box; word-wrap: break-word;">Since the states of day i only relies on i-1 and i-2</p>

<ol style="margin-top: 0; margin-bottom: .55em; color: #3e3e3e; padding-left: 30px; line-height: 1.6;">
<li style="color: #3e3e3e; line-height: 24px;"><p style="color: #3e3e3e; text-align: justify; margin: 6px 0; line-height: 1.2; min-height: 1em; box-sizing: border-box; word-wrap: break-word;">preBuy = buy; <br style="color: #3e3e3e;"/>
 buy = Math.max(preSell - p, preBuy);</p></li>
<li style="color: #3e3e3e; line-height: 24px;"><p style="color: #3e3e3e; text-align: justify; margin: 6px 0; line-height: 1.2; min-height: 1em; box-sizing: border-box; word-wrap: break-word;">preSell = sell; <br style="color: #3e3e3e;"/>
    sell = Math.max(preBuy + p, sell);</p></li></ol></li>
</ol>

<pre style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; word-wrap: break-word; padding: 12px 13px; margin: 0 0 1.1em; line-height: 1.6; word-break: break-all; font-size: 13px; color: #898989; background-color: #f8f8f8; border: 0; border-radius: 3px; text-align: start; position: relative; background: #f2f2f2;"><code style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; border-radius: 0; font-size: inherit; background-color: transparent; color: #333; display: block; overflow-x: auto; background: #f8f8f8; padding: 1.3em 2em; padding-left: 3.3em;"><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">1.</span><span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">class</span> Solution {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">2.</span>    <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">public</span> <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span> maxProfit(<span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span>[] prices) {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">3.</span>        <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span> n = prices.length;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">4.</span>        <span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">if</span> (n &lt; <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">2</span>)
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">5.</span>            <span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">return</span> <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">0</span>;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">6.</span>        <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span> preBuy = Integer.MIN_VALUE, buy = Integer.MIN_VALUE, preSell = <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">0</span>, sell = <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">0</span>;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">7.</span>        <span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">for</span> (<span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span> p : prices) {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">8.</span>            preBuy = buy;  <span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">// preBuy = buy[i-1]</span>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">9.</span>            buy = Math.<span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">max</span>(preSell - p, preBuy);  <span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">// preSell = sell[i-2]</span>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">10.</span>            preSell = sell;  <span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">// preSell = sell[i-1]</span>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">11.</span>            sell = Math.<span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">max</span>(preBuy + p, sell);
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">12.</span>        }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">13.</span>        <span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">return</span> sell;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">14.</span>    }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">15.</span>}
</div></code></pre></div><center style="display:none !important;visibility:collapse !important;height:0 !important;white-space:nowrap;width:100%;overflow:hidden">%23%20121%26122%26123%26188%26309.%20Best%20Time%20to%20Buy%20and%20Sell%20Stock%0A@%28LeetCode%29%5BEasy%2C%20Hard%2C%20Array%2C%20Greedy%2C%20DP%5D%0A%23%23%20121.%20Only%20one%20transaction%0AGreedy%3A%20greedy%20for%20best%20profit%20-%20buy%20the%20cheapest%20one%0A%60%60%60%0Aclass%20Solution%20%7B%0A%20%20%20%20public%20int%20maxProfit%28int%5B%5D%20prices%29%20%7B%0A%20%20%20%20%20%20%20%20int%20buy%20%3D%20Integer.MAX_VALUE%2C%20profit%20%3D%200%3B%0A%20%20%20%20%20%20%20%20for%20%28int%20i%20%3D%200%3B%20i%20%3C%20prices.length%3B%20i++%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20buy%20%3D%20Math.min%28buy%2C%20prices%5Bi%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20profit%20%3D%20Math.max%28profit%2C%20prices%5Bi%5D%20-%20buy%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20profit%3B%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20122.%20As%20many%20transactions%20as%20you%20like%0AGreedy%3A%20%20if%20a%3Cb%3Cc%2C%20a-c%20%3D%20b-a%20+%20c-b%0A%0A%60%60%60%0Aclass%20Solution%20%7B%0A%20%20%20%20public%20int%20maxProfit%28int%5B%5D%20prices%29%20%7B%0A%20%20%20%20%20%20%20%20int%20profit%20%3D%200%3B%0A%20%20%20%20%20%20%20%20for%20%28int%20i%20%3D%201%3B%20i%20%3C%20prices.length%3B%20i++%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28prices%5Bi%5D%20%3E%20prices%5Bi%20-%201%5D%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20profit%20+%3D%20prices%5Bi%5D%20-%20prices%5Bi%20-%201%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20profit%3B%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20123%26188.%20At%20most%20two%28k%29%20transactions%0ADP%3A%0A%20dp%5Bi%5D%5Bj%5D%3A%20max%20profit%20on%20day%20i%20with%20up%20to%20j%20transactions%0A%20dp%5Bi%5D%5Bj%5D%20%3D%20max%20between%3A%0A1.%20already%20j%20transaction%20before%20day%20i%3A%20dp%5Bi-1%5D%5Bj%5D%0A2.%20j-1%20transctions%20before%20day%20k%28k%20%3C%20i%29%20and%20make%20transaction%20on%20day%20i%3A%0A%09max%28dp%5Bk%5D%5Bj-1%5D%20+%20prices%5Bi%5D%20-%20prices%5Bk%5D%29%20%3D%20prices%5Bi%5D%20+%20max%28dp%5Bk%5D%5Bj-1%5D%20-%20prices%5Bk%5D%29%0A%09%0Adp%5B0%5D%5Bj%5D%20%3D%200%2C%20on%20day%200%20no%20transaction%20was%20made%0Adp%5Bi%5D%5B0%5D%20%3D%200%2C%200%20transcation%0A%0A%60%60%60%0Aclass%20Solution%20%7B%0A%20%20%20%20public%20int%20maxProfit%28int%5B%5D%20prices%29%20%7B%0A%20%20%20%20%20%20%20%20int%20n%20%3D%20prices.length%2C%20profit%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20%28n%20%3C%202%29%0A%20%20%20%20%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%20%20int%5B%5D%5B%5D%20dp%20%3D%20new%20int%5Bn%5D%5B3%5D%3B%0A%20%20%20%20%20%20%20%20for%20%28int%20j%20%3D%201%3B%20j%20%3C%203%3B%20j++%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20int%20maxDiff%20%3D%20dp%5B0%5D%5Bj%20-%201%5D%20-%20prices%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20%28int%20i%20%3D%201%3B%20i%20%3C%20n%3B%20i++%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dp%5Bi%5D%5Bj%5D%20%3D%20Math.max%28dp%5Bi%20-%201%5D%5Bj%5D%2C%20maxDiff%20+%20prices%5Bi%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20maxDiff%20%3D%20Math.max%28dp%5Bi%5D%5Bj%20-%201%5D%20-%20prices%5Bi%5D%2C%20maxDiff%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20profit%20%3D%20Math.max%28dp%5Bi%5D%5Bj%5D%2C%20profit%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20profit%3B%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0AGreedy%20for%20123%0AFirst%20transaction%3A%20as%20121%2C%20buy%20the%20cheapest%20one%0ASecond%20transaction%3A%20use%20the%20profit%20of%20first%20transaction%20to%20buy%20the%20second%20one%20and%20then%20compute%20the%20final%20profit.%0A%60%60%60%0Aclass%20Solution%20%7B%0A%20%20%20%20public%20int%20maxProfit%28int%5B%5D%20prices%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28prices.length%20%3C%202%29%0A%20%20%20%20%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%20%20int%20buy1%20%3D%20Integer.MAX_VALUE%2C%20buy2%20%3D%20Integer.MAX_VALUE%3B%0A%20%20%20%20%20%20%20%20int%20profit1%20%3D%200%2C%20profit2%20%3D%200%3B%0A%20%20%20%20%20%20%20%20for%20%28int%20p%20%3A%20prices%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20profit2%20%3D%20Math.max%28profit2%2C%20p%20-%20buy2%29%3B%20//%20sell%20all%20stock%20to%20get%20final%20profit%0A%20%20%20%20%20%20%20%20%20%20%20%20buy2%20%3D%20Math.min%28buy2%2C%20p%20-%20profit1%29%3B%20//%20sell%20first%20stock%28profit1%29%20and%20buy%20the%20second%20stock%3B%20or%20to%20say%2C%20use%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20profit1%20to%20buy%20second%20stock%0A%20%20%20%20%20%20%20%20%20%20%20%20profit1%20%3D%20Math.max%28profit1%2C%20p%20-%20buy1%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20buy1%20%3D%20Math.min%28buy1%2C%20p%29%3B%20//%20buy%20the%20lowest%20one%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20profit2%3B%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%23%23%20188.%20At%20most%20k%20transaction%0AAvoid%20Memory%20Limit%20Exceeded%3A%0A%0A%60%60%60%0A%20//%20if%20k%20%3E%3D%20n/2%2C%20you%20can%20make%20maximum%20number%20of%20transactions.%0A%20//%20each%20transaction%20needs%20at%20least%202%20days%0A%20%20%20%20%20%20%20%20if%20%28k%20%3E%3D%20n%20/%202%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20int%20profit%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20%28int%20i%20%3D%201%3B%20i%20%3C%20n%3B%20i++%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28prices%5Bi%5D%20%3E%20prices%5Bi%20-%201%5D%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20profit%20+%3D%20prices%5Bi%5D%20-%20prices%5Bi%20-%201%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20profit%3B%0A%20%20%20%20%20%20%20%20%7D%0A%60%60%60%0A%0A%23%23%20309.%20With%20cooldown%0ADP%3A%0A1.%203%20dynamic%20array%3A%20maxProfit%20of%20sequence%20end%20with%20*operation*%20before%20day%20i%0A%092.%20buy%5Bi%5D%3A%20max%28cool%5Bi-1%5D-p%5Bi%5D*%28buy%20on%20day%20i%29*%2C%20buy%5Bi-1%5D%29%0A%093.%20sell%5Bi%5D%3A%20max%28buy%5Bi-1%5D+p%5Bi%5D*%28sell%20on%20day%20i%29*%2C%20sell%5Bi-1%5D%29%0A%094.%20cool%5Bi%5D%3A%20max%28buy%5Bi-1%5D%2C%20sell%5Bi-1%5D%2C%20cool%5Bi-1%5D%29%0A2.%20Deduce%20transition%20function%3A%20cool%5Bi%5D%20%3E%3D%20buy%5Bi%5D%2C%20cool%5Bi%5D%20%3C%3D%20sell%5Bi%5D.%20So%20**cool%5Bi%5D%20%3D%20sell%5Bi-1%5D**%0A%093.%20buy%5Bi%5D%20%3D%20max%28sell%5Bi-2%5D%20-%20p%5Bi-1%5D%2C%20buy%5Bi-1%5D%29%0A%094.%20sell%5Bi%5D%20%3D%20max%28buy%5Bi-1%5D+p%5Bi%5D%2C%20sell%5Bi-1%5D%29%0A3.%20Since%20the%20states%20of%20day%20i%20only%20relies%20on%20i-1%20and%20i-2%0A%094.%20preBuy%20%3D%20buy%3B%0A%20%20%20%20%20%20%20%20%20buy%20%3D%20Math.max%28preSell%20-%20p%2C%20preBuy%29%3B%0A%20%20%20%202.%20preSell%20%3D%20sell%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20sell%20%3D%20Math.max%28preBuy%20+%20p%2C%20sell%29%3B%0A%0A%60%60%60%0Aclass%20Solution%20%7B%0A%20%20%20%20public%20int%20maxProfit%28int%5B%5D%20prices%29%20%7B%0A%20%20%20%20%20%20%20%20int%20n%20%3D%20prices.length%3B%0A%20%20%20%20%20%20%20%20if%20%28n%20%3C%202%29%0A%20%20%20%20%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%20%20int%20preBuy%20%3D%20Integer.MIN_VALUE%2C%20buy%20%3D%20Integer.MIN_VALUE%2C%20preSell%20%3D%200%2C%20sell%20%3D%200%3B%0A%20%20%20%20%20%20%20%20for%20%28int%20p%20%3A%20prices%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20preBuy%20%3D%20buy%3B%20%20//%20preBuy%20%3D%20buy%5Bi-1%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20buy%20%3D%20Math.max%28preSell%20-%20p%2C%20preBuy%29%3B%20%20//%20preSell%20%3D%20sell%5Bi-2%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20preSell%20%3D%20sell%3B%20%20//%20preSell%20%3D%20sell%5Bi-1%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20sell%20%3D%20Math.max%28preBuy%20+%20p%2C%20sell%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20sell%3B%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A</center><br/></span>
</div></body></html> 