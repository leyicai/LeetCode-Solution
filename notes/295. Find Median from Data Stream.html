<html>
<head>
  <title>295. Find Median from Data Stream</title>
  <basefont face="Segoe UI" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600753 (en-US, DDL); Windows/10.0.0 (Win64);"/>
  <meta name="content-class" content="maxiang"/>
  <style>
    body, td {
      font-family: Segoe UI;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="789"/>
<h1>295. Find Median from Data Stream</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>Tags:</b></td><td><i>Array, BST, Hard, Heap</i></td></tr>
</table>
</div>
<br/>

<div><span lang="v2" style="color: #2c3f51; font-family: Candara, Microsoft Yahei, 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, Song, sans-serif; font-size: 15px; line-height: 1.6; background: none;"><del style="position:relative;display:block;z-index:10;"><a href="http://maxiang.io/#/?provider=evernote&amp;guid=29ab764b-a588-4b55-b579-c1d7c1e05356&amp;notebook=LeetCode" style="position: absolute;color: #FFF;text-decoration: none;font-size: 12px;height: 25px;border-radius: 0;margin-top: -20px;right: 15px;background: rgba(0, 0, 0, 0);border-left: 10px solid #BB3A34;border-right: 10px solid #BB3A34;border-bottom: 5px solid rgba(0, 0, 0, 0);width: 0;text-indent:-100000px;">Edit</a></del><div style="color: #3e3e3e; font-family: Candara, Microsoft Yahei, 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, Song, sans-serif; font-size: 15px; line-height: 1.6;">
                        
                    

<h1 style="margin-top: 21px; font-family: inherit; margin-bottom: 10.5px; color: #3e3e3e; font-weight: bold; line-height: 1.2; margin: 20px 0; text-align: left; padding-left: 15px; word-break: break-all; font-size: 32px; border-left: 8px solid #71BA51;">295. Find Median from Data Stream</h1>

<p style="color: #3e3e3e; text-align: justify; margin: 6px 0; line-height: 1.2; min-height: 1em; box-sizing: border-box; word-wrap: break-word;"></p>

<h4 style="margin-bottom: 10.5px; font-family: inherit; margin-top: 10.5px; color: #3e3e3e; line-height: 1.2; font-weight: bold; margin: 20px 0; text-align: left; padding-left: 15px; font-size: 20px; word-break: break-all;">Two Heaps</h4>

<ul style="margin-top: 0; margin-bottom: 1.1em; color: #3e3e3e; padding-left: 30px; line-height: 1.6;"><li style="color: #3e3e3e; line-height: 24px;"><p style="color: #3e3e3e; text-align: justify; margin: 6px 0; line-height: 1.2; min-height: 1em; box-sizing: border-box; word-wrap: break-word;">Use two heaps (priority queue) <em style="color: #3e3e3e; line-height: 1.6;">(in Java PQ is min heap)</em></p>

<ul style="margin-top: 0; margin-bottom: .55em; color: #3e3e3e; padding-left: 30px; line-height: 1.6;">
<li style="color: #3e3e3e; line-height: 24px;"><p style="color: #3e3e3e; text-align: justify; margin: 6px 0; line-height: 1.2; min-height: 1em; box-sizing: border-box; word-wrap: break-word;"><code style="font-family: 'Source Code Pro',Consolas,monospace; font-size: .9em; padding: 2px 4px; background-color: #f9f2f4; white-space: normal; border-radius: 4px; color: #a71d5d;">small</code>: max heap of smaller half</p></li>
<li style="color: #3e3e3e; line-height: 24px;"><p style="color: #3e3e3e; text-align: justify; margin: 6px 0; line-height: 1.2; min-height: 1em; box-sizing: border-box; word-wrap: break-word;"><code style="font-family: 'Source Code Pro',Consolas,monospace; font-size: .9em; padding: 2px 4px; background-color: #f9f2f4; white-space: normal; border-radius: 4px; color: #a71d5d;">large</code>: min heap of larger half</p></li></ul></li>
<li style="color: #3e3e3e; line-height: 24px;"><p style="color: #3e3e3e; text-align: justify; margin: 6px 0; line-height: 1.2; min-height: 1em; box-sizing: border-box; word-wrap: break-word;">Negate the numbers in <code style="font-family: 'Source Code Pro',Consolas,monospace; font-size: .9em; padding: 2px 4px; background-color: #f9f2f4; white-space: normal; border-radius: 4px; color: #a71d5d;">small</code> to realize max heap with min heap</p></li>
<li style="color: #3e3e3e; line-height: 24px;"><p style="color: #3e3e3e; text-align: justify; margin: 6px 0; line-height: 1.2; min-height: 1em; box-sizing: border-box; word-wrap: break-word;"><code style="font-family: 'Source Code Pro',Consolas,monospace; font-size: .9em; padding: 2px 4px; background-color: #f9f2f4; white-space: normal; border-radius: 4px; color: #a71d5d;">addNum()</code>: the size of <code style="font-family: 'Source Code Pro',Consolas,monospace; font-size: .9em; padding: 2px 4px; background-color: #f9f2f4; white-space: normal; border-radius: 4px; color: #a71d5d;">small</code> always &lt;= <code style="font-family: 'Source Code Pro',Consolas,monospace; font-size: .9em; padding: 2px 4px; background-color: #f9f2f4; white-space: normal; border-radius: 4px; color: #a71d5d;">large</code></p></li>
<li style="color: #3e3e3e; line-height: 24px;"><p style="color: #3e3e3e; text-align: justify; margin: 6px 0; line-height: 1.2; min-height: 1em; box-sizing: border-box; word-wrap: break-word;"><code style="font-family: 'Source Code Pro',Consolas,monospace; font-size: .9em; padding: 2px 4px; background-color: #f9f2f4; white-space: normal; border-radius: 4px; color: #a71d5d;">findMedian()</code>: either the head of <code style="font-family: 'Source Code Pro',Consolas,monospace; font-size: .9em; padding: 2px 4px; background-color: #f9f2f4; white-space: normal; border-radius: 4px; color: #a71d5d;">large</code> or the average of  <code style="font-family: 'Source Code Pro',Consolas,monospace; font-size: .9em; padding: 2px 4px; background-color: #f9f2f4; white-space: normal; border-radius: 4px; color: #a71d5d;">small</code> â€œtail and <code style="font-family: 'Source Code Pro',Consolas,monospace; font-size: .9em; padding: 2px 4px; background-color: #f9f2f4; white-space: normal; border-radius: 4px; color: #a71d5d;">large</code> head</p></li>
</ul>

<pre style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; word-wrap: break-word; padding: 12px 13px; margin: 0 0 1.1em; line-height: 1.6; word-break: break-all; font-size: 13px; color: #898989; background-color: #f8f8f8; border: 0; border-radius: 3px; text-align: start; position: relative; background: #f2f2f2;"><code style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; border-radius: 0; font-size: inherit; background-color: transparent; color: #333; display: block; overflow-x: auto; background: #f8f8f8; padding: 1.3em 2em; padding-left: 3.3em;"><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">1.</span><span style="color: #3e3e3e; display: inline; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">public</span> <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">void</span> <span style="display: inline; line-height: 1.6; color: #900; font-weight: bold; background-color: transparent;">addNum</span><span style="color: #3e3e3e; display: inline; line-height: 1.6; background-color: transparent;">(<span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span> num)</span> </span>{
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">2.</span>    large.add(num);
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">3.</span>    small.add(-large.poll());
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">4.</span>    <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">if</span> (small.size() &gt; large.size()) {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">5.</span>        large.add(-small.poll());
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">6.</span>    }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">7.</span>}
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">8.</span><div style="color: #3e3e3e; line-height: 1.6;"></div>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">9.</span><span style="color: #3e3e3e; display: inline; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">public</span> <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">double</span> <span style="display: inline; line-height: 1.6; color: #900; font-weight: bold; background-color: transparent;">findMedian</span><span style="color: #3e3e3e; display: inline; line-height: 1.6; background-color: transparent;">()</span> </span>{
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">10.</span>    <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">return</span> small.size() &lt; large.size() ? large.peek() : (large.peek() - small.peek()) / <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">2.0</span>;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">11.</span>}
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">12.</span><div style="color: #3e3e3e; line-height: 1.6;"></div>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">13.</span><span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">private</span> Queue&lt;Integer&gt; small = <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">new</span> PriorityQueue();
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">14.</span><span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">private</span> Queue&lt;Integer&gt; large = <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">new</span> PriorityQueue();
</div></code></pre>



<h4 style="margin-bottom: 10.5px; font-family: inherit; margin-top: 10.5px; color: #3e3e3e; line-height: 1.2; font-weight: bold; margin: 20px 0; text-align: left; padding-left: 15px; font-size: 20px; word-break: break-all;">Use multiset in C++</h4>

<ul style="margin-top: 0; margin-bottom: 1.1em; color: #3e3e3e; padding-left: 30px; line-height: 1.6;"><li style="color: #3e3e3e; line-height: 24px;"><p style="color: #3e3e3e; text-align: justify; margin: 6px 0; line-height: 1.2; min-height: 1em; box-sizing: border-box; word-wrap: break-word;">Use two pointers to track the median position in the tree</p>

<ul style="margin-top: 0; margin-bottom: .55em; color: #3e3e3e; padding-left: 30px; line-height: 1.6;">
<li style="color: #3e3e3e; line-height: 24px;"><p style="color: #3e3e3e; text-align: justify; margin: 6px 0; line-height: 1.2; min-height: 1em; box-sizing: border-box; word-wrap: break-word;">when size of tree is odd, the two pointers point to same number; else they point to the two number in the middle</p></li></ul></li>
<li style="color: #3e3e3e; line-height: 24px;"><p style="color: #3e3e3e; text-align: justify; margin: 6px 0; line-height: 1.2; min-height: 1em; box-sizing: border-box; word-wrap: break-word;"><code style="font-family: 'Source Code Pro',Consolas,monospace; font-size: .9em; padding: 2px 4px; background-color: #f9f2f4; white-space: normal; border-radius: 4px; color: #a71d5d;">addNum()</code> : O(logn)</p></li>
</ul>

<p style="color: #3e3e3e; text-align: justify; margin: 6px 0; line-height: 1.2; min-height: 1em; box-sizing: border-box; word-wrap: break-word;"><img src="295. Find Median from Data Stream_files/.1566451426203.png" type="image/png" data-filename=".1566451426203.png" alt="Alt text" longdesc="./1566451426203.png" style="border: 0; vertical-align: middle; max-width: 100%; color: #3e3e3e;" title=""/></p>

<pre style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; word-wrap: break-word; padding: 12px 13px; margin: 0 0 1.1em; line-height: 1.6; word-break: break-all; font-size: 13px; color: #898989; background-color: #f8f8f8; border: 0; border-radius: 3px; text-align: start; position: relative; background: #f2f2f2;"><code style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; border-radius: 0; font-size: inherit; background-color: transparent; color: #333; display: block; overflow-x: auto; background: #f8f8f8; padding: 1.3em 2em; padding-left: 3.3em;"><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">1.</span><span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">class</span> MedianFinder {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">2.</span>    <span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">multiset</span>&lt;<span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span>&gt; data;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">3.</span>    <span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">multiset</span>&lt;<span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span>&gt;::iterator lo_median, hi_median;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">4.</span><div style="color: #3e3e3e; line-height: 1.6;"></div>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">5.</span><span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">public</span>:
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">6.</span>    MedianFinder()
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">7.</span>        : lo_median(data.end())
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">8.</span>        , hi_median(data.end())
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">9.</span>    {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">10.</span>    }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">11.</span><div style="color: #3e3e3e; line-height: 1.6;"></div>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">12.</span>    <span style="color: #3e3e3e; display: inline; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">void</span> <span style="display: inline; line-height: 1.6; color: #900; font-weight: bold; background-color: transparent;">addNum</span><span style="color: #3e3e3e; display: inline; line-height: 1.6; background-color: transparent;">(<span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span> num)</span></span>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">13.</span><span style="color: #3e3e3e; display: inline; line-height: 1.6; background-color: transparent;">    </span>{
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">14.</span>        <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">const</span> <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">size_t</span> n = data.size();   <span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">// store previous size</span>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">15.</span><div style="color: #3e3e3e; line-height: 1.6;"></div>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">16.</span>        data.insert(num);               <span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">// insert into multiset</span>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">17.</span><div style="color: #3e3e3e; line-height: 1.6;"></div>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">18.</span>        <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">if</span> (!n) {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">19.</span>            <span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">// no elements before, one element now</span>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">20.</span>            lo_median = hi_median = data.begin();
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">21.</span>        }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">22.</span>        <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">else</span> <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">if</span> (n &amp; <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">1</span>) {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">23.</span>            <span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">// odd size before (i.e. lo == hi), even size now (i.e. hi = lo + 1)</span>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">24.</span><div style="color: #3e3e3e; line-height: 1.6;"></div>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">25.</span>            <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">if</span> (num &lt; *lo_median)       <span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">// num &lt; lo</span>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">26.</span>                lo_median--;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">27.</span>            <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">else</span>                        <span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">// num &gt;= hi</span>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">28.</span>                hi_median++;            <span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">// insertion at end of equal range</span>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">29.</span>        }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">30.</span>        <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">else</span> {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">31.</span>            <span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">// even size before (i.e. hi = lo + 1), odd size now (i.e. lo == hi)</span>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">32.</span><div style="color: #3e3e3e; line-height: 1.6;"></div>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">33.</span>            <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">if</span> (num &gt; *lo_median &amp;&amp; num &lt; *hi_median) {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">34.</span>                lo_median++;                    <span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">// num in between lo and hi</span>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">35.</span>                hi_median--;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">36.</span>            }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">37.</span>            <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">else</span> <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">if</span> (num &gt;= *hi_median)         <span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">// num inserted after hi</span>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">38.</span>                lo_median++;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">39.</span>            <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">else</span>                                <span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">// num &lt;= lo &lt; hi</span>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">40.</span>                lo_median = --hi_median;        <span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">// insertion at end of equal range spoils lo</span>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">41.</span>        }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">42.</span>    }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">43.</span><div style="color: #3e3e3e; line-height: 1.6;"></div>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">44.</span>    <span style="color: #3e3e3e; display: inline; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">double</span> <span style="display: inline; line-height: 1.6; color: #900; font-weight: bold; background-color: transparent;">findMedian</span><span style="color: #3e3e3e; display: inline; line-height: 1.6; background-color: transparent;">()</span></span>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">45.</span><span style="color: #3e3e3e; display: inline; line-height: 1.6; background-color: transparent;">    </span>{
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">46.</span>        <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">return</span> (*lo_median + *hi_median) * <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">0.5</span>;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">47.</span>    }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">48.</span>};
</div></code></pre>



<h4 style="margin-bottom: 10.5px; font-family: inherit; margin-top: 10.5px; color: #3e3e3e; line-height: 1.2; font-weight: bold; margin: 20px 0; text-align: left; padding-left: 15px; font-size: 20px; word-break: break-all;">BST with Java</h4>

<p style="color: #3e3e3e; text-align: justify; margin: 6px 0; line-height: 1.2; min-height: 1em; box-sizing: border-box; word-wrap: break-word;">find prev and next node with in-order traversal</p>

<pre style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; word-wrap: break-word; padding: 12px 13px; margin: 0 0 1.1em; line-height: 1.6; word-break: break-all; font-size: 13px; color: #898989; background-color: #f8f8f8; border: 0; border-radius: 3px; text-align: start; position: relative; background: #f2f2f2;"><code style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; border-radius: 0; font-size: inherit; background-color: transparent; color: #333; display: block; overflow-x: auto; background: #f8f8f8; padding: 1.3em 2em; padding-left: 3.3em;"><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">1.</span><span style="color: #3e3e3e; display: inline; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">class</span> <span style="display: inline; line-height: 1.6; color: #458; font-weight: bold; background-color: transparent;">MedianFinder</span> </span>{
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">2.</span>    <span style="color: #3e3e3e; display: inline; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">class</span> <span style="display: inline; line-height: 1.6; color: #458; font-weight: bold; background-color: transparent;">TreeNode</span> </span>{
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">3.</span>        <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span> val;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">4.</span>        TreeNode parent, left, right;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">5.</span><div style="color: #3e3e3e; line-height: 1.6;"></div>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">6.</span>        TreeNode(<span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span> val, TreeNode parent) {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">7.</span>            <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">this</span>.val = val;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">8.</span>            <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">this</span>.parent = parent;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">9.</span>            left = <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">null</span>;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">10.</span>            right = <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">null</span>;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">11.</span>        }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">12.</span><div style="color: #3e3e3e; line-height: 1.6;"></div>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">13.</span>        <span style="color: #3e3e3e; display: inline; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">void</span> <span style="display: inline; line-height: 1.6; color: #900; font-weight: bold; background-color: transparent;">add</span><span style="color: #3e3e3e; display: inline; line-height: 1.6; background-color: transparent;">(<span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span> num)</span> </span>{
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">14.</span>            <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">if</span> (num &gt;= val) {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">15.</span>                <span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">// add to right subtree</span>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">16.</span>                <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">if</span> (right == <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">null</span>) {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">17.</span>                    right = <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">new</span> TreeNode(num, <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">this</span>);
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">18.</span>                } <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">else</span> {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">19.</span>                    right.add(num);
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">20.</span>                }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">21.</span>            } <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">else</span> {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">22.</span>                <span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">// add to left subtree</span>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">23.</span>                <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">if</span> (left == <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">null</span>) {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">24.</span>                    left = <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">new</span> TreeNode(num, <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">this</span>);
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">25.</span>                } <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">else</span> {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">26.</span>                    left.add(num);
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">27.</span>                }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">28.</span>            }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">29.</span>        }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">30.</span><div style="color: #3e3e3e; line-height: 1.6;"></div>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">31.</span>        <span style="color: #3e3e3e; display: inline; line-height: 1.6; background-color: transparent;">TreeNode <span style="display: inline; line-height: 1.6; color: #900; font-weight: bold; background-color: transparent;">nextNode</span><span style="color: #3e3e3e; display: inline; line-height: 1.6; background-color: transparent;">()</span> </span>{
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">32.</span>            TreeNode next;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">33.</span>            <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">if</span> (right != <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">null</span>) {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">34.</span>                <span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">// next is the leftmost of right subtree</span>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">35.</span>                next = right;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">36.</span>                <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">while</span> (next.left != <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">null</span>) {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">37.</span>                    next = next.left;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">38.</span>                }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">39.</span>            } <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">else</span> {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">40.</span>                next = <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">this</span>;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">41.</span>                <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">while</span> (next.parent.right == next) {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">42.</span>                    <span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">// this is the only right child of its parent</span>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">43.</span>                    <span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">// go up left until next is a left child</span>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">44.</span>                    next = next.parent;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">45.</span>                }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">46.</span>                next = next.parent;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">47.</span>                <span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">// this is the rightmost of next's left subtree</span>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">48.</span>            }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">49.</span>            <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">return</span> next;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">50.</span>        }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">51.</span><div style="color: #3e3e3e; line-height: 1.6;"></div>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">52.</span>        <span style="color: #3e3e3e; display: inline; line-height: 1.6; background-color: transparent;">TreeNode <span style="display: inline; line-height: 1.6; color: #900; font-weight: bold; background-color: transparent;">prevNode</span><span style="color: #3e3e3e; display: inline; line-height: 1.6; background-color: transparent;">()</span> </span>{
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">53.</span>            TreeNode prev;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">54.</span>            <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">if</span> (left != <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">null</span>) {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">55.</span>                prev = left;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">56.</span>                <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">while</span> (prev.right != <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">null</span>) {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">57.</span>                    prev = prev.right;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">58.</span>                }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">59.</span>            } <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">else</span> {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">60.</span>                prev = <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">this</span>;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">61.</span>                <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">while</span> (prev.parent.left == prev) {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">62.</span>                    prev = prev.parent;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">63.</span>                }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">64.</span>                prev = prev.parent;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">65.</span>            }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">66.</span>            <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">return</span> prev;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">67.</span>        }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">68.</span>    }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">69.</span><div style="color: #3e3e3e; line-height: 1.6;"></div>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">70.</span>    <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">private</span> <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span> size; <span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">// tree size</span>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">71.</span>    TreeNode root, curr; <span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">// curr is median when size is odd, or middle left when size is even</span>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">72.</span><div style="color: #3e3e3e; line-height: 1.6;"></div>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">73.</span>    <span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">/** initialize your data structure here. */</span>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">74.</span>    <span style="color: #3e3e3e; display: inline; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">public</span> <span style="display: inline; line-height: 1.6; color: #900; font-weight: bold; background-color: transparent;">MedianFinder</span><span style="color: #3e3e3e; display: inline; line-height: 1.6; background-color: transparent;">()</span> </span>{
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">75.</span><div style="color: #3e3e3e; line-height: 1.6;"></div>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">76.</span>    }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">77.</span><div style="color: #3e3e3e; line-height: 1.6;"></div>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">78.</span>    <span style="color: #3e3e3e; display: inline; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">public</span> <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">void</span> <span style="display: inline; line-height: 1.6; color: #900; font-weight: bold; background-color: transparent;">addNum</span><span style="color: #3e3e3e; display: inline; line-height: 1.6; background-color: transparent;">(<span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">int</span> num)</span> </span>{
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">79.</span>        <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">if</span> (root == <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">null</span>) {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">80.</span>            root = <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">new</span> TreeNode(num, <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">null</span>);
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">81.</span>            curr = root;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">82.</span>            size = <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">1</span>;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">83.</span>        } <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">else</span> {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">84.</span>            root.add(num);
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">85.</span>            size++;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">86.</span>            <span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">// update curr</span>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">87.</span>            <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">if</span> (size % <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">2</span> == <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">1</span>) {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">88.</span>                <span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">// size is odd</span>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">89.</span>                <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">if</span> (curr.val &lt;= num) {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">90.</span>                    curr = curr.nextNode();
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">91.</span>                }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">92.</span>                <span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">// else curr stay same</span>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">93.</span>            } <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">else</span> {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">94.</span>                <span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">// size is even</span>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">95.</span>                <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">if</span> (curr.val &gt; num) {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">96.</span>                    curr = curr.prevNode();
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">97.</span>                }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">98.</span>            }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">99.</span>        }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">100.</span>    }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">101.</span><div style="color: #3e3e3e; line-height: 1.6;"></div>
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">102.</span>    <span style="color: #3e3e3e; display: inline; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">public</span> <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">double</span> <span style="display: inline; line-height: 1.6; color: #900; font-weight: bold; background-color: transparent;">findMedian</span><span style="color: #3e3e3e; display: inline; line-height: 1.6; background-color: transparent;">()</span> </span>{
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">103.</span>        <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">if</span> (size % <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">2</span> == <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">1</span>) {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">104.</span>            <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">return</span> curr.val;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">105.</span>        } <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">else</span> {
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">106.</span>            <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">return</span> (curr.val + curr.nextNode().val) / <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">2.0</span>;
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">107.</span>        }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">108.</span>    }
</div><div style="min-height: 1.5em; color: #3e3e3e; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #998; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">109.</span>}
</div></code></pre></div><center style="display:none !important;visibility:collapse !important;height:0 !important;white-space:nowrap;width:100%;overflow:hidden">%23%20%20295.%20Find%20Median%20from%20Data%20Stream%0A@%28LeetCode%29%5BHard%2C%20Array%2C%20Heap%2C%20BST%5D%0A%23%23%23%23%20Two%20Heaps%0A-%20Use%20two%20heaps%20%28priority%20queue%29%20*%28in%20Java%20PQ%20is%20min%20heap%29*%0A%09-%20%60small%60%3A%20max%20heap%20of%20smaller%20half%0A%09-%20%60large%60%3A%20min%20heap%20of%20larger%20half%0A-%20Negate%20the%20numbers%20in%20%60small%60%20to%20realize%20max%20heap%20with%20min%20heap%0A-%20%60addNum%28%29%60%3A%20the%20size%20of%20%60small%60%20always%20%3C%3D%20%60large%60%0A-%20%60findMedian%28%29%60%3A%20either%20the%20head%20of%20%60large%60%20or%20the%20average%20of%20%20%60small%60%20%22tail%20and%20%60large%60%20head%0A%0A%60%60%60java%0Apublic%20void%20addNum%28int%20num%29%20%7B%0A%20%20%20%20large.add%28num%29%3B%0A%20%20%20%20small.add%28-large.poll%28%29%29%3B%0A%20%20%20%20if%20%28small.size%28%29%20%3E%20large.size%28%29%29%20%7B%0A%20%20%20%20%20%20%20%20large.add%28-small.poll%28%29%29%3B%0A%20%20%20%20%7D%0A%7D%0A%0Apublic%20double%20findMedian%28%29%20%7B%0A%20%20%20%20return%20small.size%28%29%20%3C%20large.size%28%29%20%3F%20large.peek%28%29%20%3A%20%28large.peek%28%29%20-%20small.peek%28%29%29%20/%202.0%3B%0A%7D%0A%0Aprivate%20Queue%3CInteger%3E%20small%20%3D%20new%20PriorityQueue%28%29%3B%0Aprivate%20Queue%3CInteger%3E%20large%20%3D%20new%20PriorityQueue%28%29%3B%0A%60%60%60%0A%0A%23%23%23%23%20Use%20multiset%20in%20C++%0A-%20Use%20two%20pointers%20to%20track%20the%20median%20position%20in%20the%20tree%0A%09-%20when%20size%20of%20tree%20is%20odd%2C%20the%20two%20pointers%20point%20to%20same%20number%3B%20else%20they%20point%20to%20the%20two%20number%20in%20the%20middle%0A%09%20%0A-%20%60addNum%28%29%60%20%3A%20O%28logn%29%0A%21%5BAlt%20text%5D%28./1566451426203.png%29%0A%0A%0A%60%60%60cpp%0Aclass%20MedianFinder%20%7B%0A%20%20%20%20multiset%3Cint%3E%20data%3B%0A%20%20%20%20multiset%3Cint%3E%3A%3Aiterator%20lo_median%2C%20hi_median%3B%0A%0Apublic%3A%0A%20%20%20%20MedianFinder%28%29%0A%20%20%20%20%20%20%20%20%3A%20lo_median%28data.end%28%29%29%0A%20%20%20%20%20%20%20%20%2C%20hi_median%28data.end%28%29%29%0A%20%20%20%20%7B%0A%20%20%20%20%7D%0A%0A%20%20%20%20void%20addNum%28int%20num%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20const%20size_t%20n%20%3D%20data.size%28%29%3B%20%20%20//%20store%20previous%20size%0A%0A%20%20%20%20%20%20%20%20data.insert%28num%29%3B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20insert%20into%20multiset%0A%0A%20%20%20%20%20%20%20%20if%20%28%21n%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20no%20elements%20before%2C%20one%20element%20now%0A%20%20%20%20%20%20%20%20%20%20%20%20lo_median%20%3D%20hi_median%20%3D%20data.begin%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20%28n%20%26%201%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20odd%20size%20before%20%28i.e.%20lo%20%3D%3D%20hi%29%2C%20even%20size%20now%20%28i.e.%20hi%20%3D%20lo%20+%201%29%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28num%20%3C%20*lo_median%29%20%20%20%20%20%20%20//%20num%20%3C%20lo%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lo_median--%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20num%20%3E%3D%20hi%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20hi_median++%3B%20%20%20%20%20%20%20%20%20%20%20%20//%20insertion%20at%20end%20of%20equal%20range%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20even%20size%20before%20%28i.e.%20hi%20%3D%20lo%20+%201%29%2C%20odd%20size%20now%20%28i.e.%20lo%20%3D%3D%20hi%29%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28num%20%3E%20*lo_median%20%26%26%20num%20%3C%20*hi_median%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lo_median++%3B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20num%20in%20between%20lo%20and%20hi%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20hi_median--%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20%28num%20%3E%3D%20*hi_median%29%20%20%20%20%20%20%20%20%20//%20num%20inserted%20after%20hi%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lo_median++%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20num%20%3C%3D%20lo%20%3C%20hi%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lo_median%20%3D%20--hi_median%3B%20%20%20%20%20%20%20%20//%20insertion%20at%20end%20of%20equal%20range%20spoils%20lo%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20double%20findMedian%28%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%20%28*lo_median%20+%20*hi_median%29%20*%200.5%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%60%60%60%0A%0A%23%23%23%23%20BST%20with%20Java%0Afind%20prev%20and%20next%20node%20with%20in-order%20traversal%0A%0A%60%60%60java%0Aclass%20MedianFinder%20%7B%0A%20%20%20%20class%20TreeNode%20%7B%0A%20%20%20%20%20%20%20%20int%20val%3B%0A%20%20%20%20%20%20%20%20TreeNode%20parent%2C%20left%2C%20right%3B%0A%0A%20%20%20%20%20%20%20%20TreeNode%28int%20val%2C%20TreeNode%20parent%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.val%20%3D%20val%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.parent%20%3D%20parent%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20left%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20right%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20void%20add%28int%20num%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28num%20%3E%3D%20val%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20add%20to%20right%20subtree%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28right%20%3D%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20right%20%3D%20new%20TreeNode%28num%2C%20this%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20right.add%28num%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20add%20to%20left%20subtree%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28left%20%3D%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20left%20%3D%20new%20TreeNode%28num%2C%20this%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20left.add%28num%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20TreeNode%20nextNode%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20TreeNode%20next%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28right%20%21%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20next%20is%20the%20leftmost%20of%20right%20subtree%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20next%20%3D%20right%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20while%20%28next.left%20%21%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20next%20%3D%20next.left%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20next%20%3D%20this%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20while%20%28next.parent.right%20%3D%3D%20next%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20this%20is%20the%20only%20right%20child%20of%20its%20parent%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20go%20up%20left%20until%20next%20is%20a%20left%20child%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20next%20%3D%20next.parent%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20next%20%3D%20next.parent%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20this%20is%20the%20rightmost%20of%20next%27s%20left%20subtree%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20next%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20TreeNode%20prevNode%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20TreeNode%20prev%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28left%20%21%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20prev%20%3D%20left%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20while%20%28prev.right%20%21%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20prev%20%3D%20prev.right%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20prev%20%3D%20this%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20while%20%28prev.parent.left%20%3D%3D%20prev%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20prev%20%3D%20prev.parent%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20prev%20%3D%20prev.parent%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20prev%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20private%20int%20size%3B%20//%20tree%20size%0A%20%20%20%20TreeNode%20root%2C%20curr%3B%20//%20curr%20is%20median%20when%20size%20is%20odd%2C%20or%20middle%20left%20when%20size%20is%20even%0A%0A%20%20%20%20/**%20initialize%20your%20data%20structure%20here.%20*/%0A%20%20%20%20public%20MedianFinder%28%29%20%7B%0A%0A%20%20%20%20%7D%0A%0A%20%20%20%20public%20void%20addNum%28int%20num%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28root%20%3D%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20root%20%3D%20new%20TreeNode%28num%2C%20null%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20curr%20%3D%20root%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20size%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20root.add%28num%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20size++%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20update%20curr%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28size%20%25%202%20%3D%3D%201%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20size%20is%20odd%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28curr.val%20%3C%3D%20num%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20curr%20%3D%20curr.nextNode%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20else%20curr%20stay%20same%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20size%20is%20even%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28curr.val%20%3E%20num%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20curr%20%3D%20curr.prevNode%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20public%20double%20findMedian%28%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28size%20%25%202%20%3D%3D%201%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20curr.val%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%28curr.val%20+%20curr.nextNode%28%29.val%29%20/%202.0%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%60%60%60</center><br/></span>
</div></body></html> 